{% extends "hidp/base.html" %}
{% load i18n %}

{% block title %}{% translate 'Manage linked trusted services' %}{% endblock %}

{% block body %}
  <h1>{% translate 'Manage your linked trusted services' %}</h1>

  {% if oidc_error_message %}
  <ul>
    <li>
      {{ oidc_error_message }}
    </li>
  </ul>
  {% endif %}

  {% if successfully_linked_provider %}
  <ul>
    <li>{% blocktranslate trimmed with provider=successfully_linked_provider.name%}
      Successfully linked your {{ provider }} account.
      {% endblocktranslate %}
      <a href="{{ request.path }}" aria-label="{% translate 'Dismiss' %}">âœ•</a>
    </li>
  </ul>
  {% endif %}

  {% if oidc_linked_providers %}
  <h2>{% translate 'Linked services' %}</h2>
  {% for item in oidc_linked_providers %}
  <p>
    {% blocktranslate trimmed with provider=item.provider.name %}
    Linked with {{ provider }}
    {% endblocktranslate %}
    <a href="{{ item.url }}" aria-label="{% translate 'Unlink' %}">{% translate 'Unlink' %}</a>
  </p>
  {% endfor %}
  {% endif %}

  {% if oidc_available_providers %}
  <h2>{% translate 'Available services' %}</h2>
  {% for item in oidc_available_providers %}
  <form action="{{ item.url }}" method="POST">
    {% csrf_token %}
    <button type="submit">
      {% blocktranslate trimmed with provider=item.provider.name %}
      Link with {{ provider }}
      {% endblocktranslate %}
    </button>
  </form>
  {% endfor %}
  {% endif %}

  <hr>
  <a href="{% url 'hidp_accounts:manage_account' %}">{% translate 'Back' %}</a>
{% endblock %}
