{% extends "hidp/base_post_login.html" %}
{% load i18n %}

{% block title %}{% translate 'Set password' %}{% endblock %}

{% block main %}
  <h1>{% translate 'Set password' %}</h1>

  {% if must_reauthenticate %}
  <p>{% translate 'For your security, you need to re-authenticate via a linked service before you can set a password.' %}</p>

  <h2>{% translate 'Linked services' %}</h2>
  {% for item in oidc_linked_providers %}
  <form action="{{ item.url }}" method="POST">
    {% csrf_token %}
    <input type="hidden" name="next" value="{{ auth_next_url }}">
    <button type="submit">
      {% blocktranslate trimmed with provider=item.provider.name %}
      Authenticate with {{ provider }}
      {% endblocktranslate %}
    </button>
  </form>
  {% empty %}
  <p>{% translate 'However, your account is not currently linked to any service, so you cannot set a password at this time.' %}</p>
  {% endfor %}

  <p><a href="{{ cancel_url }}">{% translate 'Cancel' %}</a></p>

  {% else %}
  <form method="post">
    {% csrf_token %}
    {{ form }}
    <button type="submit">{% translate 'Save' %}</button>
    <a href="{{ cancel_url }}">{% translate 'Cancel' %}</a>
  </form>
  {% endif %}
{% endblock %}
